.\" Automatically generated by Pandoc 2.7.3
.\"
.TH "cdflow" "1" "July 2019" "" ""
.hy
.SH NAME
.PP
\f[B]cdflow\f[R] - create and manage software services using continuous
delivery
.SH SYNOPSIS
.PP
\f[B]cdflow release\f[R] \f[B]--platform-config\f[R]
\f[I]platform_config\f[R]\&... [\f[I]version\f[R]] [\f[I]options\f[R]]
.PD 0
.P
.PD
\f[B]cdflow deploy\f[R] \f[I]environment\f[R] [\f[I]version\f[R]]
[\f[I]options\f[R]]
.PD 0
.P
.PD
\f[B]cdflow destroy\f[R] \f[I]environment\f[R] [\f[I]options\f[R]]
.PD 0
.P
.PD
\f[B]cdflow shell\f[R] \f[I]environment\f[R]
.SH DESCRIPTION
.PP
\f[B]cdflow\f[R] is a program to create and manage services in a
continuous delivery pipeline using \f[B]terraform\f[R].
The intended workflow is to generate an artifact using \f[B]cdflow
release\f[R], which is then deployed to one or more envinronments using
\f[B]cdflow deploy\f[R].
.SS Environment
.PP
\f[B]cdflow\f[R] expects to be run from the root of a project.
It assumes that there to be the following files in its environment:
.IP \[bu] 2
\f[I]cdflow.yml\f[R], a yaml file with the following fields:
.RS 2
.IP \[bu] 2
\f[I]team\f[R]: the name of your team.
.IP \[bu] 2
\f[I]account_scheme\f[R]: provided by your platform team.
.IP \[bu] 2
\f[I]type\f[R]: one of either \f[I]docker\f[R], \f[I]lambda\f[R], or
\f[I]infra\f[R].
.RE
.IP \[bu] 2
an \f[I]/infra\f[R] folder containing valid \f[B]terraform\f[R] config
files.
.IP \[bu] 2
an optional \f[I]config\f[R] folder, containing JSON \f[B]terraform\f[R]
variable files.
.SS cdflow release
.PP
Builds and publishes a release.
The information in the release allows \f[B]cdflow deploy\f[R] to run
\f[B]terraform\f[R] in a repeatable way, in an attempt to produce
identical deployments each time.
This information is stored in an AWS S3 bucket.
.PP
Always included are
.IP \[bu] 2
platform configuration
.IP \[bu] 2
component configuration (the \f[I]/config\f[R] folder, see above)
.IP \[bu] 2
\f[B]cdflow\f[R] version
.IP \[bu] 2
\f[B]terraform\f[R] version
.IP \[bu] 2
\f[B]terraform\f[R] providers and modules (from the \f[I]/infra\f[R]
folder, see above).
.PP
An additional artefact will be produced, based upon the based upon the
\f[I]type\f[R] field in the \f[I]cdflow.yml\f[R] file (see above):
.IP \[bu] 2
\f[I]docker\f[R]
.RS 2
.PP
A Docker image created from a \f[I]Dockerfile\f[R] in the root of the
project.
This image is also published to an AWS Elastic Container Registry
.RE
.IP \[bu] 2
\f[I]lambda\f[R]
.RS 2
.PP
A zip file of the project\[cq]s \f[I]/src\f[R] folder, suitable for
deployment as an AWS lambda.
.RE
.IP \[bu] 2
\f[I]infra\f[R]
.RS 2
.PP
No extra artefacts will be produced.
.RE
.PP
The \f[I]version\f[R] parameter is the user-defined identfier for the
release.
It must be unique.
Conventionally this will be the build number, a hyphen, and then the
short \f[B]git\f[R] commit identifier.
If no \f[I]version\f[R] is supplied, the release is built but not
.SS cdflow deploy
.PP
Deploys the artefact created with \f[B]cdflow release\f[R] to
.SS cdflow destroy
.PP
describe destroy command and what it does
.SS cdflow shell
.PP
describe shell command and what it does
.SH OPTIONS
.TP
.B \f[B]-c\f[R] \f[I]component_name\f[R], \f[B]\[en]component\f[R] \f[I]component_name\f[R]
something to do with a component name
.TP
.B \f[B]-v\f[R], \f[B]\[en]verbose\f[R]
Give verbose logging output
.TP
.B \f[B]-p\f[R], \f[B]\[en]plan-only\f[R]
Generate and show terraform execution plan.
Only for \f[B]cdflow deploy\f[R].
.SH SEE ALSO
.IP \[bu] 2
terraform (https://www.terraform.io)
.SH AUTHORS
Graham Lyons; Arthur Gassner; Keir Badger; Tom Yandell.
